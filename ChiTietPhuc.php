<?php
require_once "ChiTietDon.php";
require_once "ChiTietMay.php";

class ChiTietPhuc extends ChiTietMay
{
    private $soLuongChiTietCon;
    private $dsChiTietCon = [];
    private $loaiChiTiet;

    public function nhap()
    {
        parent::nhap(); // TODO: Change the autogenerated stub
        do {
            $this->soLuongChiTietCon = readline("Co Bao Nhieu Chi Tiet:");
            if (!is_numeric($this->soLuongChiTietCon)) {
                echo "so luong chi tiet con phai la so \n";
            } elseif ($this->soLuongChiTietCon < 0) {
                echo "so luong chi tiet con khong duoc la so am \n";
            }
        } while (!is_numeric($this->soLuongChiTietCon) || $this->soLuongChiTietCon < 0);
        for ($i = 0; $i < $this->soLuongChiTietCon; $i++) {
            do {
                $this->loaiChiTiet = readline("Chi Tiet Don => Nhap 1 || Chi Tiet Phuc => Nhap 2 :");
                if ($this->loaiChiTiet != 1 && $this->loaiChiTiet != 2) {
                    echo "vui long chi chon 1 hoac 2 \n";
                }
            } while ($this->loaiChiTiet != 1 && $this->loaiChiTiet != 2);
            if ($this->loaiChiTiet == 1 || $this->loaiChiTiet == 2) {
                if ($this->loaiChiTiet == 1) {
                    $chiTietDon = new ChiTietDon();
                    $chiTietDon->nhap();
                    $this->dsChiTietCon[] = $chiTietDon;
                } else {
                    $chiTietPhuc = new ChiTietPhuc();
                    $chiTietPhuc->nhap();
                    $this->dsChiTietCon[] = $chiTietPhuc;
                }
            }
        }
    }

    public
    function xuat()
    {
        for ($i = 0; $i < $this->soLuongChiTietCon; $i++) {
            $this->dsChiTietCon[$i]->xuat();
        }
    }

    public
    function tinhTien()
    {

        $tongTien = 0;
        for ($i = 0; $i < $this->soLuongChiTietCon; $i++) {
            $tongTien += $this->dsChiTietCon[$i]->tinhTien();
        }
        return $tongTien;

    }

    public
    function tinhKhoiLuong()
    {
        // TODO: Implement tinhKhoiLuong() method.
        $tongKhoiLuong = 0;
        for ($i = 0; $i < $this->soLuongChiTietCon; $i++) {
            $tongKhoiLuong += $this->dsChiTietCon[$i]->tinhKhoiLuong();
        }
        return $tongKhoiLuong;
    }
}
